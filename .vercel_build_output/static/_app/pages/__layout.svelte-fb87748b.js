import{D as e,S as t,i as n,s,e as o,t as a,k as l,c as r,a as c,g as i,d,n as u,b as f,f as h,E as m,F as p,G as g,H as v,I as $,j as b,m as w,o as x,x as y,u as E,v as k,J as A,K as R,L as U,r as I,w as M,M as S,h as V,l as j,N as C,O as N,P as O,Q as T,R as _,T as B,U as D}from"../chunks/vendor-57f7ae41.js";import{c as P,t as G,s as H,a as L,b as z,d as W,e as X,l as F}from"../chunks/api-a70f9d43.js";import{c as J,M as K,C as Q,R as q}from"../chunks/RecommendationCard-cd1cc2c7.js";import{g as Y}from"../chunks/navigation-51f4a605.js";import"../chunks/singletons-12a22614.js";const Z={subscribe:t=>(()=>{const t=e("__svelte__");return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:t.navigating.subscribe}},session:t.session}})().page.subscribe(t)};function ee(e){let t,n,s,b,w,x,y,E,k,A,R,U,I,M,S;return{c(){t=o("div"),n=o("div"),s=o("a"),b=a("View Profile"),w=l(),x=o("a"),y=a("View Group"),E=l(),k=o("a"),A=a("My Recommendations"),R=l(),U=o("button"),I=a("Log Out"),this.h()},l(e){t=r(e,"DIV",{class:!0});var o=c(t);n=r(o,"DIV",{class:!0});var a=c(n);s=r(a,"A",{href:!0});var l=c(s);b=i(l,"View Profile"),l.forEach(d),w=u(a),x=r(a,"A",{href:!0});var f=c(x);y=i(f,"View Group"),f.forEach(d),E=u(a),k=r(a,"A",{href:!0});var h=c(k);A=i(h,"My Recommendations"),h.forEach(d),R=u(a),U=r(a,"BUTTON",{class:!0});var m=c(U);I=i(m,"Log Out"),m.forEach(d),a.forEach(d),o.forEach(d),this.h()},h(){f(s,"href","/profile"),f(x,"href","/profile/watchlist"),f(k,"href","/profile/my-recommendations"),f(U,"class","text-left"),f(n,"class","flex flex-col p-4 space-y-2"),f(t,"class","fixed top-22 right-4 bg-white shadow-md z-100")},m(o,a){h(o,t,a),m(t,n),m(n,s),m(s,b),m(n,w),m(n,x),m(x,y),m(n,E),m(n,k),m(k,A),m(n,R),m(n,U),m(U,I),M||(S=[p(U,"click",e[0]),g(J.call(null,t)),p(t,"click_outside",e[1])],M=!0)},p:v,i:v,o:v,d(e){e&&d(t),M=!1,$(S)}}}function te(e){return[()=>{P.set(void 0),G.set(void 0),localStorage.removeItem("token"),Y("/auth/sign-in")},()=>H.set(!1)]}class ne extends t{constructor(e){super(),n(this,e,te,ee,s,{})}}function se(e){let t,n;return{c(){t=o("button"),n=a("Sign Up")},l(e){t=r(e,"BUTTON",{});var s=c(t);n=i(s,"Sign Up"),s.forEach(d)},m(e,s){h(e,t,s),m(t,n)},p:v,d(e){e&&d(t)}}}function oe(e){let t,n,s;function a(e,t){var n,s;return(null==(n=e[3])?void 0:n.image)?le:(null==(s=e[3])?void 0:s.name)?ae:void 0}let l=a(e),i=l&&l(e);return{c(){t=o("button"),i&&i.c(),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var n=c(t);i&&i.l(n),n.forEach(d),this.h()},h(){f(t,"class","w-10 h-10 border-2 border-solid border-indigo-900 rounded-full flex items-center justify-center overflow-hidden bg-indigo-300")},m(o,a){h(o,t,a),i&&i.m(t,null),n||(s=p(t,"click",e[6]),n=!0)},p(e,n){l===(l=a(e))&&i?i.p(e,n):(i&&i.d(1),i=l&&l(e),i&&(i.c(),i.m(t,null)))},d(e){e&&d(t),i&&i.d(),n=!1,s()}}}function ae(e){let t,n,s=e[3].name.charAt(0).toUpperCase()+"";return{c(){t=o("span"),n=a(s)},l(e){t=r(e,"SPAN",{});var o=c(t);n=i(o,s),o.forEach(d)},m(e,s){h(e,t,s),m(t,n)},p(e,t){8&t&&s!==(s=e[3].name.charAt(0).toUpperCase()+"")&&V(n,s)},d(e){e&&d(t)}}}function le(e){let t,n;return{c(){t=o("img"),this.h()},l(e){t=r(e,"IMG",{class:!0,src:!0}),this.h()},h(){f(t,"class","h-full w-auto"),A(t.src,n=e[3].image)||f(t,"src",n)},m(e,n){h(e,t,n)},p(e,s){8&s&&!A(t.src,n=e[3].image)&&f(t,"src",n)},d(e){e&&d(t)}}}function re(e){let t,n;return t=new ne({}),{c(){b(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){x(t,e,s),n=!0},i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function ce(e){let t,n,s,g,v,b,w,x,k,S,V,j,C,N,O,T,_,B,D,P,G,H,L,z;function W(e,t){var n;return(null==(n=e[3])?void 0:n.id)?oe:se}let X=W(e),F=X(e),J=e[4]&&re();return{c(){t=o("div"),n=o("header"),s=o("a"),g=o("img"),b=l(),w=o("div"),x=o("div"),k=o("a"),S=a("Browse All"),V=l(),j=o("a"),C=a("My Watchlist"),N=l(),O=o("button"),T=a("My Recommendations"),_=l(),B=o("button"),D=a("+ Add Recommendation"),P=l(),F.c(),G=l(),J&&J.c(),this.h()},l(e){t=r(e,"DIV",{class:!0});var o=c(t);n=r(o,"HEADER",{class:!0});var a=c(n);s=r(a,"A",{href:!0});var l=c(s);g=r(l,"IMG",{src:!0,class:!0}),l.forEach(d),b=u(a),w=r(a,"DIV",{class:!0});var f=c(w);x=r(f,"DIV",{class:!0});var h=c(x);k=r(h,"A",{class:!0,href:!0});var m=c(k);S=i(m,"Browse All"),m.forEach(d),V=u(h),j=r(h,"A",{class:!0,href:!0});var p=c(j);C=i(p,"My Watchlist"),p.forEach(d),N=u(h),O=r(h,"BUTTON",{class:!0});var v=c(O);T=i(v,"My Recommendations"),v.forEach(d),h.forEach(d),_=u(f),B=r(f,"BUTTON",{class:!0});var $=c(B);D=i($,"+ Add Recommendation"),$.forEach(d),P=u(f),F.l(f),f.forEach(d),a.forEach(d),G=u(o),J&&J.l(o),o.forEach(d),this.h()},h(){var o,a,l,r;A(g.src,v="/_app/assets/grouprec-logo-9be75482.png")||f(g,"src","/_app/assets/grouprec-logo-9be75482.png"),f(g,"class","h-12 w-auto"),f(s,"href","/recommendations"),f(k,"class","relative h-full flex items-center px-4 hover:bg-indigo-50 svelte-nfhgto"),f(k,"href","/recommendations"),R(k,"active",null==(a=null==(o=e[1])?void 0:o.path)?void 0:a.includes("/recommendations")),f(j,"class","relative h-full flex items-center px-4 hover:bg-indigo-50 svelte-nfhgto"),f(j,"href","/profile/watchlist"),R(j,"active",null==(r=null==(l=e[1])?void 0:l.path)?void 0:r.includes("/profile/watchlist")),f(O,"class","relative h-full flex items-center px-4 hover:bg-indigo-50 svelte-nfhgto"),R(O,"modalOut",e[2]),f(x,"class","flex h-full items-center"),f(B,"class","flex px-4 py-2 border-1 border-indigo-900 items-center rounded-lg hover:bg-indigo-50"),f(w,"class","flex h-full items-center space-x-2"),f(n,"class","flex items-center justify-between h-17 px-4 bg-white shadow-md"),f(t,"class","fixed top-0 w-screen z-100")},m(o,a){h(o,t,a),m(t,n),m(n,s),m(s,g),m(n,b),m(n,w),m(w,x),m(x,k),m(k,S),m(x,V),m(x,j),m(j,C),m(x,N),m(x,O),m(O,T),m(w,_),m(w,B),m(B,D),m(w,P),F.m(w,null),m(t,G),J&&J.m(t,null),H=!0,L||(z=[p(O,"click",(function(){U(e[0])&&e[0].apply(this,arguments)})),p(B,"click",e[5])],L=!0)},p(n,[s]){var o,a,l,r;e=n,2&s&&R(k,"active",null==(a=null==(o=e[1])?void 0:o.path)?void 0:a.includes("/recommendations")),2&s&&R(j,"active",null==(r=null==(l=e[1])?void 0:l.path)?void 0:r.includes("/profile/watchlist")),4&s&&R(O,"modalOut",e[2]),X===(X=W(e))&&F?F.p(e,s):(F.d(1),F=X(e),F&&(F.c(),F.m(w,null))),e[4]?J?16&s&&y(J,1):(J=re(),J.c(),y(J,1),J.m(t,null)):J&&(I(),E(J,1,1,(()=>{J=null})),M())},i(e){H||(y(J),H=!0)},o(e){E(J),H=!1},d(e){e&&d(t),F.d(),J&&J.d(),L=!1,$(z)}}}function ie(e,t,n){let s,o,a,l;S(e,Z,(e=>n(1,s=e))),S(e,L,(e=>n(2,o=e))),S(e,P,(e=>n(3,a=e))),S(e,H,(e=>n(4,l=e)));let{handleShowUserRecommendations:r}=t;return e.$$set=e=>{"handleShowUserRecommendations"in e&&n(0,r=e.handleShowUserRecommendations)},[r,s,o,a,l,()=>{z.set(!0)},()=>{H.set(!0)}]}class de extends t{constructor(e){super(),n(this,e,ie,ce,s,{handleShowUserRecommendations:0})}}function ue(e,t,n){const s=e.slice();return s[21]=t[n],s}function fe(e){let t,n,s,a,i,p,g,v,$;t=new de({props:{handleShowUserRecommendations:e[5]}});let A={ctx:e,current:null,token:null,hasCatch:!0,pending:pe,then:me,catch:he,error:24,blocks:[,,,]};N(e[9],A);let R=e[3]&&ge(e),U=e[4]&&$e(e);return{c(){b(t.$$.fragment),n=l(),s=o("main"),a=o("div"),i=o("div"),A.block.c(),p=l(),R&&R.c(),g=l(),U&&U.c(),v=j(),this.h()},l(e){w(t.$$.fragment,e),n=u(e),s=r(e,"MAIN",{class:!0});var o=c(s);a=r(o,"DIV",{class:!0});var l=c(a);i=r(l,"DIV",{class:!0});var f=c(i);A.block.l(f),f.forEach(d),l.forEach(d),o.forEach(d),p=u(e),R&&R.l(e),g=u(e),U&&U.l(e),v=j(),this.h()},h(){f(i,"class","bg-white w-full max-w-200 min-h-screen pt-20 px-8"),f(a,"class","w-screen flex justify-center"),f(s,"class","layout-background min-h-screen")},m(e,o){x(t,e,o),h(e,n,o),h(e,s,o),m(s,a),m(a,i),A.block.m(i,A.anchor=null),A.mount=()=>i,A.anchor=null,h(e,p,o),R&&R.m(e,o),h(e,g,o),U&&U.m(e,o),h(e,v,o),$=!0},p(t,n){C(A,e=t,n),e[3]?R?(R.p(e,n),8&n&&y(R,1)):(R=ge(e),R.c(),y(R,1),R.m(g.parentNode,g)):R&&(I(),E(R,1,1,(()=>{R=null})),M()),e[4]?U?(U.p(e,n),16&n&&y(U,1)):(U=$e(e),U.c(),y(U,1),U.m(v.parentNode,v)):U&&(I(),E(U,1,1,(()=>{U=null})),M())},i(e){$||(y(t.$$.fragment,e),y(A.block),y(R),y(U),$=!0)},o(e){E(t.$$.fragment,e);for(let t=0;t<3;t+=1){const e=A.blocks[t];E(e)}E(R),E(U),$=!1},d(e){k(t,e),e&&d(n),e&&d(s),A.block.d(),A.token=null,A=null,e&&d(p),R&&R.d(e),e&&d(g),U&&U.d(e),e&&d(v)}}}function he(e){let t,n;return{c(){t=o("p"),n=a("Sign in error")},l(e){t=r(e,"P",{});var s=c(t);n=i(s,"Sign in error"),s.forEach(d)},m(e,s){h(e,t,s),m(t,n)},p:v,i:v,o:v,d(e){e&&d(t)}}}function me(e){let t;const n=e[12].default,s=O(n,e,e[15],null);return{c(){s&&s.c()},l(e){s&&s.l(e)},m(e,n){s&&s.m(e,n),t=!0},p(e,o){s&&s.p&&(!t||32768&o)&&T(s,n,e,e[15],t?B(n,e[15],o,null):_(e[15]),null)},i(e){t||(y(s,e),t=!0)},o(e){E(s,e),t=!1},d(e){s&&s.d(e)}}}function pe(e){let t,n;return{c(){t=o("p"),n=a("loading")},l(e){t=r(e,"P",{});var s=c(t);n=i(s,"loading"),s.forEach(d)},m(e,s){h(e,t,s),m(t,n)},p:v,i:v,o:v,d(e){e&&d(t)}}}function ge(e){let t,n;return t=new K({props:{onHideModal:e[14],hideCloseX:!0,$$slots:{default:[ve]},$$scope:{ctx:e}}}),{c(){b(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){x(t,e,s),n=!0},p(e,n){const s={};32768&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function ve(e){let t,n;return t=new Q({props:{onHideModal:e[13]}}),{c(){b(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){x(t,e,s),n=!0},p:v,i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function $e(e){let t,n;return t=new K({props:{hideCloseX:!0,onHideModal:e[7],$$slots:{default:[we]},$$scope:{ctx:e}}}),{c(){b(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){x(t,e,s),n=!0},p(e,n){const s={};32771&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function be(e){let t,n;return t=new q({props:{recommendation:e[21],hideActions:!0,hideRecommendedBy:!0,showEditButton:!0,hide:e[1]&&e[1]!==e[21].id,editClickCallback:e[6],deleteClickCallback:e[8]}}),{c(){b(t.$$.fragment)},l(e){w(t.$$.fragment,e)},m(e,s){x(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.recommendation=e[21]),3&n&&(s.hide=e[1]&&e[1]!==e[21].id),t.$set(s)},i(e){n||(y(t.$$.fragment,e),n=!0)},o(e){E(t.$$.fragment,e),n=!1},d(e){k(t,e)}}}function we(e){let t,n,s=e[0],a=[];for(let o=0;o<s.length;o+=1)a[o]=be(ue(e,s,o));const l=e=>E(a[e],1,1,(()=>{a[e]=null}));return{c(){t=o("div");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){t=r(e,"DIV",{class:!0});var n=c(t);for(let t=0;t<a.length;t+=1)a[t].l(n);n.forEach(d),this.h()},h(){f(t,"class","space-y-2")},m(e,s){h(e,t,s);for(let n=0;n<a.length;n+=1)a[n].m(t,null);n=!0},p(e,n){if(323&n){let o;for(s=e[0],o=0;o<s.length;o+=1){const l=ue(e,s,o);a[o]?(a[o].p(l,n),y(a[o],1)):(a[o]=be(l),a[o].c(),y(a[o],1),a[o].m(t,null))}for(I(),o=s.length;o<a.length;o+=1)l(o);M()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)y(a[e]);n=!0}},o(e){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)E(a[t]);n=!1},d(e){e&&d(t),D(a,e)}}}function xe(e){var t;let n,s,o=(null==(t=e[2])?void 0:t.id)&&fe(e);return{c(){o&&o.c(),n=j()},l(e){o&&o.l(e),n=j()},m(e,t){o&&o.m(e,t),h(e,n,t),s=!0},p(e,[t]){var s;(null==(s=e[2])?void 0:s.id)?o?(o.p(e,t),4&t&&y(o,1)):(o=fe(e),o.c(),y(o,1),o.m(n.parentNode,n)):o&&(I(),E(o,1,1,(()=>{o=null})),M())},i(e){s||(y(o),s=!0)},o(e){E(o),s=!1},d(e){o&&o.d(e),e&&d(n)}}}function ye(e,t,n){let s,o,a;S(e,P,(e=>n(2,s=e))),S(e,z,(e=>n(3,o=e))),S(e,L,(e=>n(4,a=e)));let{$$slots:l={},$$scope:r}=t;var c=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,a){function l(e){try{c(s.next(e))}catch(t){a(t)}}function r(e){try{c(s.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}c((s=s.apply(e,t||[])).next())}))};let i,{tags:d}=t,{auth:u}=t,f=[];null==s||s.recommended_count;let h=c(void 0,void 0,void 0,(function*(){{const e=localStorage.getItem("token");if(e){G.set(e);const t=yield W({endpoint:"current-user"});if(200===t.status){const e=yield t.json();P.set(e),c(void 0,void 0,void 0,(function*(){const e=yield X(fetch,{endpoint:"tags"}),t=yield e;console.log(e),F.set(t)}))}}else Y("/auth/sign-in")}}));return e.$$set=e=>{"tags"in e&&n(10,d=e.tags),"auth"in e&&n(11,u=e.auth),"$$scope"in e&&n(15,r=e.$$scope)},[f,i,s,o,a,()=>c(void 0,void 0,void 0,(function*(){L.set(!0);const e={endpoint:"/user-recommended-by",params:{user_id:null==s?void 0:s.id}},t=yield W(e);if(200===t.status){const e=yield t.json();console.log(e),n(0,f=e)}})),e=>{n(1,i=e)},()=>{n(1,i=void 0),L.set(!1)},e=>{const t=f.map((e=>e.id)).indexOf(e);if(t>-1){const e=[...f];e.splice(t,1),n(0,f=[...e])}},h,d,u,l,()=>z.set(!1),()=>z.set(!1),r]}class Ee extends t{constructor(e){super(),n(this,e,ye,xe,s,{tags:10,auth:11})}}export{Ee as default};
